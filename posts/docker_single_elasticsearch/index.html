<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Docker_single_elasticsearch</title>
		<meta name="viewport" content="width=device-width">
		
		<link rel="stylesheet" href="https://example.comcss/hybrid.css">
		<link rel="stylesheet" href="https://example.comcss/style.css">
		<link rel="stylesheet" href="https://example.comcss/colors-dark.css">

		
	</head>
	<body>
		<header id="header">
			<h1><a href="https://example.com">life</a></h1>
			<p>Hugo theme zozo example site.</p>
		</header>

		<div id="page">
			<div id="sidebar">
				<nav>
	
		<ul class="nav">
			
				<li><a href="/"><span>首页</span></a></li>
			
				<li><a href="/posts/"><span>归档</span></a></li>
			
				<li><a href="/tags/"><span>标签</span></a></li>
			
				<li><a href="/about/"><span>关于</span></a></li>
			
		</ul>
	
</nav>

			</div>

			<div id="content">
				
	<article class="post">
		<h1><a href="https://example.com/posts/docker_single_elasticsearch/">Docker_single_elasticsearch</a> </h1>

		<div class="post-content">

<h1 id="docker-run-single-node-elasticsearch">docker run single node elasticsearch</h1>

<h2 id="prepare-config">prepare config</h2>

<pre><code>/Users/lzq/docker/elasticsearch/es-single.yml

cluster.name: &quot;docker-cluster&quot;
network.host: 0.0.0.0

# custom config
node.name: &quot;node-1&quot;
discovery.seed_hosts: [&quot;127.0.0.1&quot;, &quot;[::1]&quot;]
cluster.initial_master_nodes: [&quot;node-1&quot;]

# 开启跨域访问支持，默认为false
http.cors.enabled: true

# 跨域访问允许的域名地址，(允许所有域名)以上使用正则
http.cors.allow-origin: /.*/ 

</code></pre>

<ul>
<li>重点是 node.name 和 cluster.initial_master_nodes</li>
</ul>

<h2 id="cmd">cmd</h2>

<pre><code class="language-bash">#JAVA_OPTS='-Xmx512m'
docker run -e ES_JAVA_OPTS=&quot;-Xms256m -Xmx256m&quot; -d -p 9200:9200 -p 9300:9300 -v /Users/lzq/docker/elasticsearch/es-single.yml:/usr/share/elasticsearch/config/elasticsearch.yml -v /Users/lzq/docker/elasticsearch/esdata-single:/usr/share/elasticsearch/data --name es-single elasticsearch:7.2.0
</code></pre>

<ul>
<li>设置-e ES_JAVA_OPTS=&quot;-Xms256m -Xmx256m&quot; 是因为/etc/elasticsearch/jvm.options 默认jvm最大最小内存是2G，读者启动容器后 可用docker stats命令查看</li>
<li>-p是绑定端口，请保持9200:9200前后一致</li>
<li>-v是做文件映射，当前主机的文件映射到docker内部</li>
<li>--name是给容器设定一个名字，名字不能重复</li>
</ul>
</div>

		<p class="meta">Posted on <span class="postdate">25. July 2019</span></p>
	</article>

			</div>

			<footer id="footer">
				<p class="copyright">
					
						Powered by <a href="https://gohugo.io/">Hugo</a> and the
						<a href="https://github.com/bake/solar-theme-hugo">Solar</a>-theme.
					
				</p>
			</footer>
		</div>

		
	</body>
</html>
